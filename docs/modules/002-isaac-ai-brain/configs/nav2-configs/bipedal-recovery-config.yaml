# Nav2 Recovery Behaviors Configuration for Bipedal Humanoid Robots
# This configuration defines recovery behaviors specific to bipedal locomotion
# including balance recovery and step planning recovery actions

bt_navigator:
  ros__parameters:
    use_sim_time: True
    # Bipedal-specific behavior tree with recovery patterns
    # Includes balance recovery and step planning recovery behaviors
    plugin_lib_names:
    - nav2_compute_path_to_pose_action_bt_node
    - nav2_compute_path_through_poses_action_bt_node
    - nav2_follow_path_action_bt_node
    - nav2_back_up_action_bt_node
    - nav2_spin_action_bt_node
    - nav2_wait_action_bt_node
    - nav2_assisted_teleop_action_bt_node
    - nav2_assisted_teleop_condition_bt_node
    - nav2_distance_controller_bt_node
    - nav2_goal_updater_node_bt_node
    - nav2_initial_pose_received_condition_bt_node
    - nav2_is_battery_low_condition_bt_node
    - nav2_is_localizer_active_condition_bt_node
    - nav2_is_stuck_condition_bt_node
    - nav2_localization_service_bt_node
    - nav2_move_on_heading_action_bt_node
    - nav2_navigate_through_poses_action_bt_node
    - nav2_navigate_to_pose_action_bt_node
    - nav2_pipeline_sequence_bt_node
    - nav2_rate_controller_bt_node
    - nav2_recovery_node_bt_node
    - nav2_remove_passed_goals_action_bt_node
    - nav2_replace_voxel_grid_node_bt_node
    - nav2_round_robin_node_bt_node
    - nav2_simple_grasp_condition_bt_node
    - nav2_simple_wait_condition_bt_node
    - nav2_speed_controller_bt_node
    - nav2_spin_action_bt_node
    - nav2_system_status_bt_node
    - nav2_time_expired_condition_bt_node
    - nav2_transform_available_condition_bt_node
    - nav2_truncate_path_action_bt_node
    - nav2_truncate_path_local_action_bt_node
    - nav2_velocity_check_condition_bt_node

recovery_server:
  ros__parameters:
    use_sim_time: True
    # Bipedal-specific recovery behaviors
    # Includes balance recovery and safe stopping for humanoid robots
    recovery_plugins: ["spin", "backup", "wait", "bipedal_balance_recovery"]
    spin:
      plugin: "nav2_recoveries::Spin"
      # Bipedal-specific spin recovery with limited angular velocity
      # for maintaining balance during recovery
      spin_dist: 1.57
      time_allowance: 10.0
    backup:
      plugin: "nav2_recoveries::BackUp"
      # Bipedal-specific backup recovery with controlled movement
      # for maintaining stability during backward motion
      backup_dist: 0.3
      backup_speed: 0.05
      time_allowance: 10.0
    wait:
      plugin: "nav2_recoveries::Wait"
      # Bipedal-specific wait recovery allowing for balance recovery
      wait_duration: 2.0
    bipedal_balance_recovery:
      plugin: "nav2_recoveries::Wait"
      # Placeholder for custom bipedal balance recovery behavior
      # This would be implemented as a custom recovery plugin
      # for humanoid-specific balance recovery
      wait_duration: 5.0